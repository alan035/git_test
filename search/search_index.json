{"config":{"lang":["en"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"awesome-tools \u4e2d\u6587\u4fe1\u606f\u5904\u7406\u5b9e\u9a8c\u5ba4\u5de5\u5177\u6c47\u603b \u8d85\u53c2\u6570\u641c\u7d22","title":"Home"},{"location":"#awesome-tools","text":"\u4e2d\u6587\u4fe1\u606f\u5904\u7406\u5b9e\u9a8c\u5ba4\u5de5\u5177\u6c47\u603b \u8d85\u53c2\u6570\u641c\u7d22","title":"awesome-tools"},{"location":"batch_run/","text":"\u5e76\u884c\u8c03\u53c2\u811a\u672c(batch_run.py)\u4f7f\u7528\u8bf4\u660e \u539f\u7406 : \u901a\u8fc7\u7ec4\u5408\u547d\u4ee4\u884c\u53c2\u6570\u6765\u6267\u884c\u4e0d\u540c\u7684\u5b9e\u9a8c\u914d\u7f6e\uff0c\u9700\u8981\u628a\u6a21\u578b\u53c2\u6570\u66b4\u9732\u4e3a\u547d\u4ee4\u884c\u53c2\u6570\u3002 \u8be5\u4f7f\u7528\u6587\u6863\u5c06\u5206\u4e3a\u8f93\u5165\u7684 \u914d\u7f6e\u6587\u4ef6 \u3001\u8f93\u51fa\u7684 \u8fd0\u884c\u65e5\u5fd7 \u548c \u652f\u6301\u7684\u5b50\u547d\u4ee4 \u4e09\u4e2a\u90e8\u5206\u8fdb\u884c\u8bb2\u89e3 \u914d\u7f6e\u6587\u4ef6(config.json) { \"output_folder\": \"/xx/tune_params/\", \"available_gpus\": [0, 1, 2], \"max_process_per_gpu\": 2, \"device_arg_name\": \"-device\", // device\u53c2\u6570\u7684\u540d\u79f0 \"model_path_arg_name\": \"-model-path\", // \u6a21\u578b\u8f93\u51fa\u53c2\u6570\u7684\u540d\u79f0 \"base_cmd\": \"python -m spannet.running.train\", \"common_args\": \"-data arn_data/ACE2005\", \"cmd_option\": { \"-arg1\": { \"type\": \"single\", \"value\": 1 }, \"-arg2\": { \"type\": \"null\" }, \"-arg3\":{ \"type\": \"enum\", \"value\": [\"x\", \"xx\", \"xxx\"] }, \"-arg4\": { \"type\": \"arr\", \"start_value\": 1, \"stop_value\": 2, \"step\": 0.1 } } } \u652f\u6301\u7684\u53c2\u6570\u7c7b\u578b\u5305\u62ec4\u7c7b\uff1a single\u3001null\u3001enum\u3001arr \uff0c\u53ef\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u9009\u62e9 \u547d\u4ee4\u884c\u53c2\u6570\u6839\u636e\u662f\u5426\u9700\u8981\u5728\u672c\u811a\u672c\u8fd0\u884c\u65f6\u624d\u80fd\u786e\u5b9a\uff0c\u53ef\u5206\u4e3a\u9759\u6001\u53c2\u6570\u548c\u52a8\u6001\u53c2\u6570\u4e24\u4e2a\u90e8\u5206\uff0c\u5176\u4e2d\uff0c\u9759\u6001\u53c2\u6570\u53c8\u5206\u4e3a(base_cmd)\u3001\u4e0d\u9700\u8fdb\u884c\u641c\u7d22\u7684\u8d85\u53c2(common_args)\u548c\u9700\u8981\u8fdb\u884c\u641c\u7d22\u7684\u8d85\u53c2(cmd_option)\uff1b\u52a8\u6001\u53c2\u6570\u76ee\u524d\u6682\u65f6\u53ea\u67091\u4e2a\uff1a\u52a8\u6001\u5730\u5bf9\u5f53\u524d\u53ef\u4f7f\u7528\u7684gpu\u8fdb\u884c\u9009\u62e9\u3002 \u547d\u4ee4\u884c\u6307\u4ee4: {\u9759\u6001\u53c2\u6570: {base_cmd\u3001common_args\u3001cmd_option}, \u52a8\u6001\u53c2\u6570} \u6a21\u578b\u7684\u8f93\u51fa\u6587\u4ef6\u5939\u540d\u4ec5\u7531cmd_option\u786e\u5b9a \u8fd0\u884c\u65e5\u5fd7(main_process.log) \u5e76\u884c\u8c03\u8bd5\u7a0b\u5e8f\u7684\u8fdb\u7a0b\u7f16\u53f7 \u8f93\u51fa\u7ed3\u679c\u7684\u6587\u4ef6\u5939 \u7528\u4e8e\u52a8\u6001\u66f4\u65b0GPU\u7684\u914d\u7f6e\u6587\u4ef6\u6240\u5728\u8def\u5f84 \u672c\u6b21\u8bad\u7ec3\u6a21\u578b\u603b\u6570 TO RUN CMD\u4e2d\u4e3a\u9700\u6267\u884c\u7684\u6240\u6709\u547d\u4ee4\u884c \u5f53\u524d\u53ef\u4f7f\u7528\u7684GPU\u5217\u8868 [CMD_ID]. \u9759\u6001\u53c2\u6570 [CMD_ID]. Run [PID]: ON GPU [GPU_ID] CMD, \u6b63\u5728\u6267\u884c\u7684CMD\u7f16\u53f7\u3001\u8fdb\u7a0b\u7f16\u53f7\u3001GPU\u7f16\u53f7\u4ee5\u53ca\u5b8c\u6574\u7684\u547d\u4ee4\u884c [CMD_ID]. [PID] Run Err Code: [Err_Code] Used xx:xx:xx \u4ee3\u8868\u8be5\u547d\u4ee4\u6267\u884c\u5931\u8d25\uff0c\u62a5\u9519\u9000\u51fa\uff0c\u7a0b\u5e8f\u6267\u884c\u65f6\u95f4\uff08\u8fd4\u56de\u7684\u9519\u8bef\u7801\u53ef\u5728\u88ab\u6267\u884c\u7684\u7a0b\u5e8f\uff0c\u901a\u8fc7 exit(Err_Code) \uff0c\u8fd9\u6837\u9519\u8bef\u5c31\u80fd\u88ab\u6355\u83b7\uff0c\u65b9\u4fbf\u91cd\u8bad\u7ec3\uff09 [CMD_ID]. [PID] Run Finished Code: 0 Used xx:xx:xx \u4ee3\u8868\u8be5\u547d\u4ee4\u6267\u884c\u6210\u529f\uff0c\u6b63\u5e38\u7ed3\u675f \u5bf9\u672c\u6b21\u6279\u8bad\u7ec3\u7684\u603b\u7ed3\uff0c\u5982\u679c\u6709\u547d\u4ee4\u6267\u884c\u5931\u8d25\u7684\u6307\u4ee4\uff0c\u5219\u4f1a\u8fd4\u56de\u8fd9\u4e9b\u6307\u4ee4\u7684\u7f16\u53f7\uff0c\u53ef\u7528\u4e8e\u91cd\u8bad\u7ec3 MAIN_PROCESS_ID xxxx OUTPUT FOLDER /xx/tune_params/ UPDATE GPU CONFIG PATH /xx/tune_params/config.json TOTAL x MODELS TO BE TRAINED TO RUN CMD 1. python -m spannet.running.train -max-span-size 6 ann -model-path /xx/0_maxspansize_6_ann_ ... 00:00:00 AVAILABLE GPUS: [0, 1, 2] 00:00:00 x. Run xxxx: ON GPU x python -m spannet.running.train -max-span-size 6 ann -model-path /xx/0_maxspansize_6_ann_ ... 00:01:33 x. xxx Run Err Code: 137 Used xx:xx:xx ... 00:04:50 x. xxx Run Finished Code: 0 Used xx:xx:xx ... 00:12:44 FINISH ALL PROCESSES! xx MODELS ARE TRAINED, xx MODELS END NORMALLY, xx MODELS EXITS ABNORMALLY THESE CMD_IDS MAY NEED TO BE RETRAINED: [5, 6, 7, 8, 9] \u652f\u6301\u7684\u5b50\u547d\u4ee4 \u8be5\u811a\u672c\u652f\u63014\u4e2a\u5b50\u547d\u4ee4\uff0c\u5206\u522b\u4e3a get_cmds \u3001 train \u3001 kill \u548c get_results python batch_run.py -h usage: batch_run.py [-h] {get_cmds,train,kill,get_results} ... positional arguments: {get_cmds,train,kill,get_results} get_cmds list all cmds train start batch train kill stop all training model get_results get all final results 1. get_cmds\u5b50\u547d\u4ee4 (\u83b7\u53d6\u6240\u6709\u9759\u6001\u53c2\u6570) \u6309\u987a\u5e8f\u7ed9\u51fa\u914d\u7f6e\u6587\u4ef6\u652f\u6301\u7684\u6240\u6709\u9759\u6001\u53c2\u6570 \u5305\u542b\u4e00\u4e2a\u53c2\u6570\uff1a -config_path \u8fdb\u884c\u8d85\u53c2\u641c\u7d22\u7684\u53c2\u6570\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\uff1b\u5fc5\u9009 python batch_run.py get_cmds -h usage: batch_run.py get_cmds [-h] -config_path CONFIG optional arguments: -h, --help show this help message and exit -config_path CONFIG batch train's config path 0. python -m spannet.running.train -max-span-size 6 ann -model-path /xx/0_maxspansize_6_ann_ 1. python -m spannet.running.train -max-span-size 7 ann -model-path /xx/1_maxspansize_7_ann_ 2. python -m spannet.running.train -max-span-size 8 ann -model-path /xx/2_maxspansize_8_ann_ 3. python -m spannet.running.train -max-span-size 9 ann -model-path /xx/3_maxspansize_9_ann_ 4. python -m spannet.running.train -max-span-size 10 ann -model-path /xx/4_maxspansize_10_ann_ 2. train\u5b50\u547d\u4ee4\uff08\u6279\u8bad\u7ec3\u3001\u8d1f\u8f7d\u6d4b\u8bd5\u4ee5\u53ca\u91cd\u8bad\u7ec3\uff09 \u8be5\u5b50\u547d\u4ee4\u53ef\u4ee5\u5b9e\u73b0\u8ddf\u8bad\u7ec3\u6709\u5173\u76843\u4e2a\u529f\u80fd\uff1a 1. \u6279\u8bad\u7ec3 \uff1a\u521d\u6b21\u6279\u8bad\u7ec3\uff0c\u901a\u8fc7\u8bfb\u53d6\u7ed9\u5b9a\u7684\u914d\u7f6e\u6587\u4ef6\uff08json\u683c\u5f0f\uff09\uff0c\u8fdb\u884c\u8d85\u53c2\u7684\u7ec4\u5408\uff0c\u7edf\u4e00\u628a\u6279\u8bad\u7ec3\u5f97\u5230\u7684\u7ed3\u679c\u653e\u5728\u914d\u7f6e\u6587\u4ef6\u6307\u5b9a\u7684\u76ee\u5f55(output_folder)\u4e0b\uff0c\u5982\uff1atune_params\u76ee\u5f55\u4e0b\u3002 tune_params/ \u251c\u2500\u2500 config.json \u914d\u7f6e\u6587\u4ef6\u7684\u62f7\u8d1d \u251c\u2500\u2500 logs \u6bcf\u4e00\u4e2a\u6a21\u578b\u8bad\u7ec3\u8fc7\u7a0b\u7684log\u4fe1\u606f\uff0c\u6bcf\u4e2alog\u6587\u4ef6\u540d\u7684\u9996\u5e8f\u53f7\u5373\u4e3a\u6a21\u578b\u5e8f\u53f7 \u251c\u2500\u2500 main_process.log \u6574\u4e2a\u6279\u8bad\u7ec3\u8fc7\u7a0b\u7684log\uff0c\u5982\u5f53\u524d\u54ea\u4e9bGPU\u53ef\u4ee5\u4f7f\u7528\uff0c\u54ea\u4e9b\u6a21\u578b\u5df2\u7ecf\u8bad\u7ec3\u597d \u2514\u2500\u2500 models \u6279\u8bad\u7ec3\u5f97\u5230\u7684\u6bcf\u4e00\u4e2a\u6a21\u578b\uff0c\u6bcf\u4e2amodel\u7684\u6587\u4ef6\u5939\u540d\u7684\u9996\u5e8f\u53f7\u5373\u4e3a\u6a21\u578b\u5e8f\u53f7 2. \u8d1f\u8f7d\u6d4b\u8bd5 \uff1a\u6d4b\u8bd5\u6279\u8bad\u7ec3\u4e2d\u4e00\u4e2a\u6a21\u578bGPU\u8d1f\u8f7d\uff08\u8fd9\u91cc\u5047\u8bbe\u6240\u6709\u7684\u6279\u8bad\u7ec3\u6a21\u578bGPU\u4f7f\u7528\u4e0d\u4f1a\u6709\u592a\u5927\u7684\u53d8\u5316\uff09\uff0c\u7528\u6765\u8bbe\u7f6e\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\"max_process_per_gpu\"\u4fe1\u606f\u3002\u5f53\u6a21\u578b\u8f7d\u5165GPU\uff0c\u7a33\u5b9a\u540e\uff0c\u53ef\u901a\u8fc7\u5b50\u547d\u4ee4kill\u7ec8\u6b62\u3002 \u8fd0\u884c\u8fc7\u7a0b\u8ddf\u6279\u8bad\u7ec3\u4e00\u81f4\uff0c\u4f46\u53ea\u9009\u7b2c\u4e00\u4e2a\u547d\u4ee4\u884c\u6267\u884c\u3002 3. \u91cd\u8bad\u7ec3 \uff1a\u5728\u6279\u8bad\u7ec3\u540e\uff0c\u5bf9\u67d0\u4e9b\u6a21\u578b\u8fdb\u884c\u91cd\u65b0\u8bad\u7ec3\u3002\u5728-config_path\u8bbe\u7f6e\u6279\u8bad\u7ec3\u751f\u6210\u7684config.json\u7684\u7edd\u5bf9\u8def\u5f84\uff08/xx/tune_params/config.json\uff09\uff0c\u5e76\u4fee\u6539\u8be5\u914d\u7f6e\u6587\u4ef6\uff0c\u6dfb\u52a0\"cmd_ids\"\u4e00\u9879\uff0c\u628a\u9700\u8981\u91cd\u65b0\u8bad\u7ec3\u7684\u6a21\u578b\u7684\u5e8f\u53f7\u4ee5\u5217\u8868\u7ed9\u51fa\u5373\u53ef\u3002\uff08\u5982\"cmd_ids\": [2, 6, 8]\uff09 \u6ce8\u610f\uff1a\u8be5\u811a\u672c\u4f1a\u81ea\u52a8\u628a\u9700\u91cd\u8bad\u7684\u5bf9\u5e94\u6a21\u578b\u6587\u4ef6\u5939\u5220\u9664\uff0c\u800c\u539fmain_process.log\u6587\u4ef6\u4f1a\u81ea\u52a8\u5b58\u6863\u53d8\u4e3amain_process_history_x.log \u5305\u542b\u4e09\u4e2a\u53c2\u6570\uff1a -config_path \u8fdb\u884c\u8d85\u53c2\u641c\u7d22\u7684\u53c2\u6570\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\uff1b\u5fc5\u9009 -load_test \u4e8c\u9009\u4e00\uff0c\u5f53\u7ed9\u51fa\u65f6\uff0c\u8868\u793a\u8fdb\u884c\u8d1f\u8f7d\u6d4b\u8bd5 -retrain \u4e8c\u9009\u4e00\uff0c\u5f53\u7ed9\u51fa\u65f6\uff0c\u8868\u793a\u8fdb\u884c\u91cd\u8bad\u7ec3 python batch_run.py train -h usage: batch_run.py train [-h] -config_path CONFIG [-load_test] [-retrain] optional arguments: -h, --help show this help message and exit -config_path CONFIG batch train's config path -load_test test how much memory a model consumes -retrain retrain some models 3. kill\u5b50\u547d\u4ee4 (\u7ec8\u6b62\u6279\u8bad\u7ec3\u6216\u8d1f\u8f7d\u6d4b\u8bd5) \u5305\u542b\u4e00\u4e2a\u53c2\u6570: -output_folder \u914d\u7f6e\u6587\u4ef6\u4e2d\u7684output_folder\u6307\u51fa\u7684\u8def\u5f84\uff08\u5982/xx/tune_params\uff09 python batch_run.py kill -h usage: batch_run.py kill [-h] -output_folder CONFIG optional arguments: -h, --help show this help message and exit -output_folder CONFIG \u53e6\u4e00\u4e2a\u6bd4\u8f83\u7b80\u5355\u7684\u7ec8\u6b62\u8bad\u7ec3\u7684\u65b9\u6cd5\uff0c\u6253\u5f00\u6279\u8bad\u7ec3\u751f\u6210\u7684main_process.log\u6587\u4ef6\uff0c\u83b7\u53d6\u4e3b\u8fdb\u7a0bpid\uff0c\u5728\u7ec8\u7aef\u6267\u884c kill -9 -pid 4. get_results\u5b50\u547d\u4ee4 (\u83b7\u53d6\u6240\u6709\u8bad\u7ec3\u7ed3\u679c) \u4ecelogs\u4e0b\u83b7\u53d6\u6bcf\u4e2a\u6a21\u578b\u7684\u8f93\u51fa\u7ed3\u679c \u5305\u542b\u4e09\u4e2a\u53c2\u6570\uff1a -output_folder \u914d\u7f6e\u6587\u4ef6\u4e2d\u7684output_folder\u6307\u51fa\u7684\u8def\u5f84\uff08\u5982/xx/tune_params\uff09 -result_patten \u6bcf\u4e2a\u6a21\u578b\u7684\u8f93\u51fa\u7ed3\u679c\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\uff08\u5982\uff1a \"Final Test (Loss: .+?, P: .+?, R: .+?, F1: .+)\" \uff09 -re_group_index \u6700\u7ec8\u7ed3\u679c\u8f93\u51fa\u7684\u7ec4\u522b python batch_run.py get_results -h usage: batch_run.py get_results [-h] -output_folder OUTPUT_FOLDER -result_patten RES_PATTEN -re_group_index RE_GROUP_INDEX optional arguments: -h, --help show this help message and exit -output_folder OUTPUT_FOLDER -result_patten RES_PATTEN -re_group_index RE_GROUP_INDEX \u7279\u6027\uff1a\u652f\u6301\u8bad\u7ec3\u8fc7\u7a0b\u4e2d\u52a8\u6001\u8c03\u6574\u53ef\u7528\u7684GPU 1. \u589e\u52a0GPU . \u82e5\u60f3\u589e\u52a0\u53ef\u7528GPU\uff0c\u53ea\u9700\u589e\u52a0\u914d\u7f6e\u6587\u4ef6\u4e2doutput_folder\u7ed9\u51fa\u7684\u8def\u5f84\u4e0bconfig.json\u91cc\u7684available_gpus\u5373\u53ef\u3002\uff08\u5fc5\u987b\u4fee\u6539\u7684\u662foutput_folder\u4e0b\u7684config.json\uff0c\u6682\u4e0d\u652f\u6301\u4fee\u6539max_process_per_gpu\uff09 2. \u51cf\u5c11GPU . \u82e5\u60f3\u7981\u7528\u67d0\u4e00GPU\uff0c\u5219\u53ea\u9700\u5728available_gpus\u4e2d\u5220\u53bb\u8be5gpu\u7f16\u53f7\u5373\u53ef\u3002 \u82e5\u60f3\u5373\u523b\u7981\u7528\uff0c\u5219\u5728config.json\u4e2d\u52a0\u5165\"kill_at_once\": true, \u5426\u5219\uff0c\u4f1a\u7b49\u5f85\u8be5GPU\u4e0a\u7684\u7a0b\u5e8f\u8fd0\u884c\u5b8c\u6bd5\u4e3a\u6b62","title":"About"},{"location":"batch_run/#batch_runpy","text":"\u539f\u7406 : \u901a\u8fc7\u7ec4\u5408\u547d\u4ee4\u884c\u53c2\u6570\u6765\u6267\u884c\u4e0d\u540c\u7684\u5b9e\u9a8c\u914d\u7f6e\uff0c\u9700\u8981\u628a\u6a21\u578b\u53c2\u6570\u66b4\u9732\u4e3a\u547d\u4ee4\u884c\u53c2\u6570\u3002 \u8be5\u4f7f\u7528\u6587\u6863\u5c06\u5206\u4e3a\u8f93\u5165\u7684 \u914d\u7f6e\u6587\u4ef6 \u3001\u8f93\u51fa\u7684 \u8fd0\u884c\u65e5\u5fd7 \u548c \u652f\u6301\u7684\u5b50\u547d\u4ee4 \u4e09\u4e2a\u90e8\u5206\u8fdb\u884c\u8bb2\u89e3","title":"\u5e76\u884c\u8c03\u53c2\u811a\u672c(batch_run.py)\u4f7f\u7528\u8bf4\u660e"},{"location":"batch_run/#configjson","text":"{ \"output_folder\": \"/xx/tune_params/\", \"available_gpus\": [0, 1, 2], \"max_process_per_gpu\": 2, \"device_arg_name\": \"-device\", // device\u53c2\u6570\u7684\u540d\u79f0 \"model_path_arg_name\": \"-model-path\", // \u6a21\u578b\u8f93\u51fa\u53c2\u6570\u7684\u540d\u79f0 \"base_cmd\": \"python -m spannet.running.train\", \"common_args\": \"-data arn_data/ACE2005\", \"cmd_option\": { \"-arg1\": { \"type\": \"single\", \"value\": 1 }, \"-arg2\": { \"type\": \"null\" }, \"-arg3\":{ \"type\": \"enum\", \"value\": [\"x\", \"xx\", \"xxx\"] }, \"-arg4\": { \"type\": \"arr\", \"start_value\": 1, \"stop_value\": 2, \"step\": 0.1 } } } \u652f\u6301\u7684\u53c2\u6570\u7c7b\u578b\u5305\u62ec4\u7c7b\uff1a single\u3001null\u3001enum\u3001arr \uff0c\u53ef\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u9009\u62e9 \u547d\u4ee4\u884c\u53c2\u6570\u6839\u636e\u662f\u5426\u9700\u8981\u5728\u672c\u811a\u672c\u8fd0\u884c\u65f6\u624d\u80fd\u786e\u5b9a\uff0c\u53ef\u5206\u4e3a\u9759\u6001\u53c2\u6570\u548c\u52a8\u6001\u53c2\u6570\u4e24\u4e2a\u90e8\u5206\uff0c\u5176\u4e2d\uff0c\u9759\u6001\u53c2\u6570\u53c8\u5206\u4e3a(base_cmd)\u3001\u4e0d\u9700\u8fdb\u884c\u641c\u7d22\u7684\u8d85\u53c2(common_args)\u548c\u9700\u8981\u8fdb\u884c\u641c\u7d22\u7684\u8d85\u53c2(cmd_option)\uff1b\u52a8\u6001\u53c2\u6570\u76ee\u524d\u6682\u65f6\u53ea\u67091\u4e2a\uff1a\u52a8\u6001\u5730\u5bf9\u5f53\u524d\u53ef\u4f7f\u7528\u7684gpu\u8fdb\u884c\u9009\u62e9\u3002 \u547d\u4ee4\u884c\u6307\u4ee4: {\u9759\u6001\u53c2\u6570: {base_cmd\u3001common_args\u3001cmd_option}, \u52a8\u6001\u53c2\u6570} \u6a21\u578b\u7684\u8f93\u51fa\u6587\u4ef6\u5939\u540d\u4ec5\u7531cmd_option\u786e\u5b9a","title":"\u914d\u7f6e\u6587\u4ef6(config.json)"},{"location":"batch_run/#main_processlog","text":"\u5e76\u884c\u8c03\u8bd5\u7a0b\u5e8f\u7684\u8fdb\u7a0b\u7f16\u53f7 \u8f93\u51fa\u7ed3\u679c\u7684\u6587\u4ef6\u5939 \u7528\u4e8e\u52a8\u6001\u66f4\u65b0GPU\u7684\u914d\u7f6e\u6587\u4ef6\u6240\u5728\u8def\u5f84 \u672c\u6b21\u8bad\u7ec3\u6a21\u578b\u603b\u6570 TO RUN CMD\u4e2d\u4e3a\u9700\u6267\u884c\u7684\u6240\u6709\u547d\u4ee4\u884c \u5f53\u524d\u53ef\u4f7f\u7528\u7684GPU\u5217\u8868 [CMD_ID]. \u9759\u6001\u53c2\u6570 [CMD_ID]. Run [PID]: ON GPU [GPU_ID] CMD, \u6b63\u5728\u6267\u884c\u7684CMD\u7f16\u53f7\u3001\u8fdb\u7a0b\u7f16\u53f7\u3001GPU\u7f16\u53f7\u4ee5\u53ca\u5b8c\u6574\u7684\u547d\u4ee4\u884c [CMD_ID]. [PID] Run Err Code: [Err_Code] Used xx:xx:xx \u4ee3\u8868\u8be5\u547d\u4ee4\u6267\u884c\u5931\u8d25\uff0c\u62a5\u9519\u9000\u51fa\uff0c\u7a0b\u5e8f\u6267\u884c\u65f6\u95f4\uff08\u8fd4\u56de\u7684\u9519\u8bef\u7801\u53ef\u5728\u88ab\u6267\u884c\u7684\u7a0b\u5e8f\uff0c\u901a\u8fc7 exit(Err_Code) \uff0c\u8fd9\u6837\u9519\u8bef\u5c31\u80fd\u88ab\u6355\u83b7\uff0c\u65b9\u4fbf\u91cd\u8bad\u7ec3\uff09 [CMD_ID]. [PID] Run Finished Code: 0 Used xx:xx:xx \u4ee3\u8868\u8be5\u547d\u4ee4\u6267\u884c\u6210\u529f\uff0c\u6b63\u5e38\u7ed3\u675f \u5bf9\u672c\u6b21\u6279\u8bad\u7ec3\u7684\u603b\u7ed3\uff0c\u5982\u679c\u6709\u547d\u4ee4\u6267\u884c\u5931\u8d25\u7684\u6307\u4ee4\uff0c\u5219\u4f1a\u8fd4\u56de\u8fd9\u4e9b\u6307\u4ee4\u7684\u7f16\u53f7\uff0c\u53ef\u7528\u4e8e\u91cd\u8bad\u7ec3 MAIN_PROCESS_ID xxxx OUTPUT FOLDER /xx/tune_params/ UPDATE GPU CONFIG PATH /xx/tune_params/config.json TOTAL x MODELS TO BE TRAINED TO RUN CMD 1. python -m spannet.running.train -max-span-size 6 ann -model-path /xx/0_maxspansize_6_ann_ ... 00:00:00 AVAILABLE GPUS: [0, 1, 2] 00:00:00 x. Run xxxx: ON GPU x python -m spannet.running.train -max-span-size 6 ann -model-path /xx/0_maxspansize_6_ann_ ... 00:01:33 x. xxx Run Err Code: 137 Used xx:xx:xx ... 00:04:50 x. xxx Run Finished Code: 0 Used xx:xx:xx ... 00:12:44 FINISH ALL PROCESSES! xx MODELS ARE TRAINED, xx MODELS END NORMALLY, xx MODELS EXITS ABNORMALLY THESE CMD_IDS MAY NEED TO BE RETRAINED: [5, 6, 7, 8, 9]","title":"\u8fd0\u884c\u65e5\u5fd7(main_process.log)"},{"location":"batch_run/#_1","text":"\u8be5\u811a\u672c\u652f\u63014\u4e2a\u5b50\u547d\u4ee4\uff0c\u5206\u522b\u4e3a get_cmds \u3001 train \u3001 kill \u548c get_results python batch_run.py -h usage: batch_run.py [-h] {get_cmds,train,kill,get_results} ... positional arguments: {get_cmds,train,kill,get_results} get_cmds list all cmds train start batch train kill stop all training model get_results get all final results","title":"\u652f\u6301\u7684\u5b50\u547d\u4ee4"},{"location":"batch_run/#1-get_cmds","text":"\u6309\u987a\u5e8f\u7ed9\u51fa\u914d\u7f6e\u6587\u4ef6\u652f\u6301\u7684\u6240\u6709\u9759\u6001\u53c2\u6570 \u5305\u542b\u4e00\u4e2a\u53c2\u6570\uff1a -config_path \u8fdb\u884c\u8d85\u53c2\u641c\u7d22\u7684\u53c2\u6570\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\uff1b\u5fc5\u9009 python batch_run.py get_cmds -h usage: batch_run.py get_cmds [-h] -config_path CONFIG optional arguments: -h, --help show this help message and exit -config_path CONFIG batch train's config path 0. python -m spannet.running.train -max-span-size 6 ann -model-path /xx/0_maxspansize_6_ann_ 1. python -m spannet.running.train -max-span-size 7 ann -model-path /xx/1_maxspansize_7_ann_ 2. python -m spannet.running.train -max-span-size 8 ann -model-path /xx/2_maxspansize_8_ann_ 3. python -m spannet.running.train -max-span-size 9 ann -model-path /xx/3_maxspansize_9_ann_ 4. python -m spannet.running.train -max-span-size 10 ann -model-path /xx/4_maxspansize_10_ann_","title":"1. get_cmds\u5b50\u547d\u4ee4 (\u83b7\u53d6\u6240\u6709\u9759\u6001\u53c2\u6570)"},{"location":"batch_run/#2-train","text":"\u8be5\u5b50\u547d\u4ee4\u53ef\u4ee5\u5b9e\u73b0\u8ddf\u8bad\u7ec3\u6709\u5173\u76843\u4e2a\u529f\u80fd\uff1a 1. \u6279\u8bad\u7ec3 \uff1a\u521d\u6b21\u6279\u8bad\u7ec3\uff0c\u901a\u8fc7\u8bfb\u53d6\u7ed9\u5b9a\u7684\u914d\u7f6e\u6587\u4ef6\uff08json\u683c\u5f0f\uff09\uff0c\u8fdb\u884c\u8d85\u53c2\u7684\u7ec4\u5408\uff0c\u7edf\u4e00\u628a\u6279\u8bad\u7ec3\u5f97\u5230\u7684\u7ed3\u679c\u653e\u5728\u914d\u7f6e\u6587\u4ef6\u6307\u5b9a\u7684\u76ee\u5f55(output_folder)\u4e0b\uff0c\u5982\uff1atune_params\u76ee\u5f55\u4e0b\u3002 tune_params/ \u251c\u2500\u2500 config.json \u914d\u7f6e\u6587\u4ef6\u7684\u62f7\u8d1d \u251c\u2500\u2500 logs \u6bcf\u4e00\u4e2a\u6a21\u578b\u8bad\u7ec3\u8fc7\u7a0b\u7684log\u4fe1\u606f\uff0c\u6bcf\u4e2alog\u6587\u4ef6\u540d\u7684\u9996\u5e8f\u53f7\u5373\u4e3a\u6a21\u578b\u5e8f\u53f7 \u251c\u2500\u2500 main_process.log \u6574\u4e2a\u6279\u8bad\u7ec3\u8fc7\u7a0b\u7684log\uff0c\u5982\u5f53\u524d\u54ea\u4e9bGPU\u53ef\u4ee5\u4f7f\u7528\uff0c\u54ea\u4e9b\u6a21\u578b\u5df2\u7ecf\u8bad\u7ec3\u597d \u2514\u2500\u2500 models \u6279\u8bad\u7ec3\u5f97\u5230\u7684\u6bcf\u4e00\u4e2a\u6a21\u578b\uff0c\u6bcf\u4e2amodel\u7684\u6587\u4ef6\u5939\u540d\u7684\u9996\u5e8f\u53f7\u5373\u4e3a\u6a21\u578b\u5e8f\u53f7 2. \u8d1f\u8f7d\u6d4b\u8bd5 \uff1a\u6d4b\u8bd5\u6279\u8bad\u7ec3\u4e2d\u4e00\u4e2a\u6a21\u578bGPU\u8d1f\u8f7d\uff08\u8fd9\u91cc\u5047\u8bbe\u6240\u6709\u7684\u6279\u8bad\u7ec3\u6a21\u578bGPU\u4f7f\u7528\u4e0d\u4f1a\u6709\u592a\u5927\u7684\u53d8\u5316\uff09\uff0c\u7528\u6765\u8bbe\u7f6e\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\"max_process_per_gpu\"\u4fe1\u606f\u3002\u5f53\u6a21\u578b\u8f7d\u5165GPU\uff0c\u7a33\u5b9a\u540e\uff0c\u53ef\u901a\u8fc7\u5b50\u547d\u4ee4kill\u7ec8\u6b62\u3002 \u8fd0\u884c\u8fc7\u7a0b\u8ddf\u6279\u8bad\u7ec3\u4e00\u81f4\uff0c\u4f46\u53ea\u9009\u7b2c\u4e00\u4e2a\u547d\u4ee4\u884c\u6267\u884c\u3002 3. \u91cd\u8bad\u7ec3 \uff1a\u5728\u6279\u8bad\u7ec3\u540e\uff0c\u5bf9\u67d0\u4e9b\u6a21\u578b\u8fdb\u884c\u91cd\u65b0\u8bad\u7ec3\u3002\u5728-config_path\u8bbe\u7f6e\u6279\u8bad\u7ec3\u751f\u6210\u7684config.json\u7684\u7edd\u5bf9\u8def\u5f84\uff08/xx/tune_params/config.json\uff09\uff0c\u5e76\u4fee\u6539\u8be5\u914d\u7f6e\u6587\u4ef6\uff0c\u6dfb\u52a0\"cmd_ids\"\u4e00\u9879\uff0c\u628a\u9700\u8981\u91cd\u65b0\u8bad\u7ec3\u7684\u6a21\u578b\u7684\u5e8f\u53f7\u4ee5\u5217\u8868\u7ed9\u51fa\u5373\u53ef\u3002\uff08\u5982\"cmd_ids\": [2, 6, 8]\uff09 \u6ce8\u610f\uff1a\u8be5\u811a\u672c\u4f1a\u81ea\u52a8\u628a\u9700\u91cd\u8bad\u7684\u5bf9\u5e94\u6a21\u578b\u6587\u4ef6\u5939\u5220\u9664\uff0c\u800c\u539fmain_process.log\u6587\u4ef6\u4f1a\u81ea\u52a8\u5b58\u6863\u53d8\u4e3amain_process_history_x.log \u5305\u542b\u4e09\u4e2a\u53c2\u6570\uff1a -config_path \u8fdb\u884c\u8d85\u53c2\u641c\u7d22\u7684\u53c2\u6570\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\uff1b\u5fc5\u9009 -load_test \u4e8c\u9009\u4e00\uff0c\u5f53\u7ed9\u51fa\u65f6\uff0c\u8868\u793a\u8fdb\u884c\u8d1f\u8f7d\u6d4b\u8bd5 -retrain \u4e8c\u9009\u4e00\uff0c\u5f53\u7ed9\u51fa\u65f6\uff0c\u8868\u793a\u8fdb\u884c\u91cd\u8bad\u7ec3 python batch_run.py train -h usage: batch_run.py train [-h] -config_path CONFIG [-load_test] [-retrain] optional arguments: -h, --help show this help message and exit -config_path CONFIG batch train's config path -load_test test how much memory a model consumes -retrain retrain some models","title":"2. train\u5b50\u547d\u4ee4\uff08\u6279\u8bad\u7ec3\u3001\u8d1f\u8f7d\u6d4b\u8bd5\u4ee5\u53ca\u91cd\u8bad\u7ec3\uff09"},{"location":"batch_run/#3-kill","text":"\u5305\u542b\u4e00\u4e2a\u53c2\u6570: -output_folder \u914d\u7f6e\u6587\u4ef6\u4e2d\u7684output_folder\u6307\u51fa\u7684\u8def\u5f84\uff08\u5982/xx/tune_params\uff09 python batch_run.py kill -h usage: batch_run.py kill [-h] -output_folder CONFIG optional arguments: -h, --help show this help message and exit -output_folder CONFIG \u53e6\u4e00\u4e2a\u6bd4\u8f83\u7b80\u5355\u7684\u7ec8\u6b62\u8bad\u7ec3\u7684\u65b9\u6cd5\uff0c\u6253\u5f00\u6279\u8bad\u7ec3\u751f\u6210\u7684main_process.log\u6587\u4ef6\uff0c\u83b7\u53d6\u4e3b\u8fdb\u7a0bpid\uff0c\u5728\u7ec8\u7aef\u6267\u884c kill -9 -pid","title":"3. kill\u5b50\u547d\u4ee4 (\u7ec8\u6b62\u6279\u8bad\u7ec3\u6216\u8d1f\u8f7d\u6d4b\u8bd5)"},{"location":"batch_run/#4-get_results","text":"\u4ecelogs\u4e0b\u83b7\u53d6\u6bcf\u4e2a\u6a21\u578b\u7684\u8f93\u51fa\u7ed3\u679c \u5305\u542b\u4e09\u4e2a\u53c2\u6570\uff1a -output_folder \u914d\u7f6e\u6587\u4ef6\u4e2d\u7684output_folder\u6307\u51fa\u7684\u8def\u5f84\uff08\u5982/xx/tune_params\uff09 -result_patten \u6bcf\u4e2a\u6a21\u578b\u7684\u8f93\u51fa\u7ed3\u679c\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\uff08\u5982\uff1a \"Final Test (Loss: .+?, P: .+?, R: .+?, F1: .+)\" \uff09 -re_group_index \u6700\u7ec8\u7ed3\u679c\u8f93\u51fa\u7684\u7ec4\u522b python batch_run.py get_results -h usage: batch_run.py get_results [-h] -output_folder OUTPUT_FOLDER -result_patten RES_PATTEN -re_group_index RE_GROUP_INDEX optional arguments: -h, --help show this help message and exit -output_folder OUTPUT_FOLDER -result_patten RES_PATTEN -re_group_index RE_GROUP_INDEX","title":"4. get_results\u5b50\u547d\u4ee4 (\u83b7\u53d6\u6240\u6709\u8bad\u7ec3\u7ed3\u679c)"},{"location":"batch_run/#gpu","text":"1. \u589e\u52a0GPU . \u82e5\u60f3\u589e\u52a0\u53ef\u7528GPU\uff0c\u53ea\u9700\u589e\u52a0\u914d\u7f6e\u6587\u4ef6\u4e2doutput_folder\u7ed9\u51fa\u7684\u8def\u5f84\u4e0bconfig.json\u91cc\u7684available_gpus\u5373\u53ef\u3002\uff08\u5fc5\u987b\u4fee\u6539\u7684\u662foutput_folder\u4e0b\u7684config.json\uff0c\u6682\u4e0d\u652f\u6301\u4fee\u6539max_process_per_gpu\uff09 2. \u51cf\u5c11GPU . \u82e5\u60f3\u7981\u7528\u67d0\u4e00GPU\uff0c\u5219\u53ea\u9700\u5728available_gpus\u4e2d\u5220\u53bb\u8be5gpu\u7f16\u53f7\u5373\u53ef\u3002 \u82e5\u60f3\u5373\u523b\u7981\u7528\uff0c\u5219\u5728config.json\u4e2d\u52a0\u5165\"kill_at_once\": true, \u5426\u5219\uff0c\u4f1a\u7b49\u5f85\u8be5GPU\u4e0a\u7684\u7a0b\u5e8f\u8fd0\u884c\u5b8c\u6bd5\u4e3a\u6b62","title":"\u7279\u6027\uff1a\u652f\u6301\u8bad\u7ec3\u8fc7\u7a0b\u4e2d\u52a8\u6001\u8c03\u6574\u53ef\u7528\u7684GPU"}]}